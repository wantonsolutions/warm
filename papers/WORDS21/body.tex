\section{Future work}

%\textbf{More data structures}:
%%
While our initial exploration has focused explicitly on Clover and it's
append-only key/value chain structure, our approach is not limited to
a particular datastructure nor only associative operations. More
complex structures can be supported, but the choice of structure must
be made with care.  For our caching approach to resolve metadata
conflicts in-network, it requires enough information to enforce remote
datastructure integrity invariants. Invariants such as ordering, or
maintaining a balance in a tree require more metadata and computation
to enforce than appending to the tail of a list. We plan to
investigate data structures which have the ideal property of requiring
a small amount of metadata (ideally $O(\log n)$, or $O(\log\log n)$) to
maintain their structural invariants while also supporting more
operations, such as range queries.

\emph{Design bottlenecks.} As observed during our evaluation,
%%
compare-and-swap operations bottleneck quickly on existing hardware
when locking is applied across queue pairs~\cite{design-guidelines},
limiting the maximum performance of systems that rely on it as a
guard.  We are exploring two potential approaches for reducing
NIC-based lock contention: 1) Remap keys to QPs in flight. Cross-QP
locking can be avoided if all requests to a shared remote memory
address arrive on the same destination QP. 2) Compare-and-swap is not
required for requests handled by our algorithm as they are
serialized. C\&s operations can be converted to writes by replacing a
few RDMA header fields. This approach would allow full-speed operation
throughput with zero locking.


\emph{Resolution interface.}
%%
Designing and running custom code on programmable switches is hard,
while understanding how to resolve write conflicts is relatively
easy. We would like to design a generic interface for developers to
resolve write conflicts, and orchestrate in-flight RDMA operations in
an application-independent fashion, perhaps as part of a larger
disaggregated computing framework or operating system~\cite{legoos}.
